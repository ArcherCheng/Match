<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://unpkg.com/rxjs@5.4.2/bundles/Rx.min.js"></script>
  <style>
    html,
    body {
      height: 100%;
    }
  </style>
</head>

<body>
  <h1>document.body.addEventListener('click2', handler)</h1>
  <script>
    // var handler = (e) => {
    //   console.log(e);
    //   document.body.removeEventListener('click', handler); // 結束監聽
    // }
    // // 註冊監聽
    // document.body.addEventListener('click', handler);

    // Rx.Observable
    // .fromEvent(document.body, 'click')
    // .take(3)
    // .subscribe(console.log);

    // var arr=['jerry','anna','william']
    // for(var i=0; i<arr.length; i++ ) {
    //   console.log(arr[i]);
    // }

    // arr.forEach(item => console.log(item));

    // var newCourseList =  [
    //   {
    //     id:123857,
    //     title: "React for Beginners",
    //     coverPng: "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     rating: 5
    //   },
    //   {
    //     id:645123,
    //     title: "Vue2 for Beginners",
    //     coverPng: "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     rating: 5
    //   },
    //   {
    //     id:455623,
    //     title: "Webpack for Beginners",
    //     coverPng: "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     rating: 5
    //   },
    //   {
    //     id:123123,
    //     title: "React for Beginners",
    //     coverPng: "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     rating: 5
    //   },
    // ];

    // var newCourseList = [
    //   {
    //     "id": 511021,
    //     "title": "React for Beginners",
    //     "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     "rating": 5
    //   },
    //   {
    //     "id": 511022,
    //     "title": "Vue2 for Beginners",
    //     "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     "rating": 5
    //   },
    //   {
    //     "id": 511023,
    //     "title": "Angular2 for Beginners",
    //     "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     "rating": 5
    //   },
    //   {
    //     "id": 511024,
    //     "title": "Webpack for Beginners",
    //     "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //     "rating": 4
    //   }
    // ];

    // var forEachItem=newCourseList.forEach(function(item,index,array){
    //   console.log(item,index,array);
    //   return item;
    // });
    // console.log(forEachItem);

    // newCourseList.forEach(function(item,index,array){
    //   item.rating = item.rating + index;
    // });

    // console.log(newCourseList);


    // var idAndTitle = [];
    // newCourseList.forEach((item) => {
    //   idAndTitle.push({ id: item.id, title: item.title, rating: item.rating });
    // });
    // console.log(idAndTitle);

    Array.prototype.mapX = function(callback) {
      var result = [];
      this.forEach(function(element,index) {
        result.push(callback(element,index));
      })
      return result;
    }

    // var idAndTitle2 = newCourseList.mapX(item => {
    //   return {id: item.id, title: item.title};
    // });
    // console.log(idAndTitle2);

    // var ratingIsFive = [];
    // newCourseList.forEach(item => {
    //   if(item.rating === 5 ) {
    //     ratingIsFive.push(item);
    //   }
    // });
    // console.log(ratingIsFive);

    Array.prototype.filterX = function(callback) {
      var result = [];
      this.forEach((item,index) => {
        if(callback(item,index)) {
          result.push(item);
        }
      })
      return result;
    }

    // var ratingIsFive2 = newCourseList.filterX(item => item.rating === 5);
    // console.log(ratingIsFive2);

    // var user = {
    //   id: 888,
    //   name: 'ArcherCheng',
    //   courseLists: [
    //     {
    //       name: "My Courses",
    //       courses: [
    //         {
    //           "id": 511019,
    //           "title": "React for Beginners",
    //           "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //           "tags": [{ id: 1, name: "JavaScript" }],
    //           "rating": 5
    //         },
    //         {
    //           "id": 511020,
    //           "title": "Front-End automat workflow",
    //           "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //           "tags": [{ "id": 2, "name": "gulp" }, { "id": 3, "name": "webpack" }],
    //           "rating": 4
    //         }
    //       ]
    //     },
    //     {
    //       name: "New Release",
    //       courses: [
    //         {
    //           "id": 511022,
    //           "title": "Vue2 for Beginners",
    //           "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //           "tags": [{ id: 1, name: "JavaScript" }],
    //           "rating": 5
    //         },
    //         {
    //           "id": 511023,
    //           "title": "Angular2 for Beginners",
    //           "coverPng": "https://res.cloudinary.com/dohtkyi84/image/upload/v1481226146/react-cover.png",
    //           "tags": [{ id: 1, name: "JavaScript" }],
    //           "rating": 4
    //         }
    //       ]
    //     }
    //   ]
    // };

    // var allCourseIds = [];
    // user.courseLists.forEach(list => {
    //   list.courses.filter(ele => ele.rating === 5)
    //   .forEach(ele => {
    //     allCourseIds.push(ele);
    //   })
    // });

    // console.log(allCourseIds);

    Array.prototype.concatAll = function () {
      var result = [];
      // this.forEach((array) => {
      //   result.push.apply(result, array);
      // })

      // this.forEach(array => {
      //   array.forEach(item => {
      //     result.push(item);
      //   })
      // });

      this.forEach(array => {
        result.push(...array);
      })

      return result;
    }

    // var allCourseIds2 = user.courseLists.map(list => {
    //   return list.courses.filter(course => course.rating === 5)
    // }).concatAll();

    // console.log(allCourseIds2);
    var courseLists = [{
      "name": "My Courses",
      "courses": [{
        "id": 511019,
        "title": "React for Beginners",
        "covers": [{
          width: 150,
          height: 200,
          url: "http://placeimg.com/150/200/tech"
        }, {
          width: 200,
          height: 200,
          url: "http://placeimg.com/200/200/tech"
        }, {
          width: 300,
          height: 200,
          url: "http://placeimg.com/300/200/tech"
        }],
        "tags": [{
          id: 1,
          name: "JavaScript"
        }],
        "rating": 5
      }, {
        "id": 511020,
        "title": "Front-End automat workflow",
        "covers": [{
          width: 150,
          height: 200,
          url: "http://placeimg.com/150/200/arch"
        }, {
          width: 200,
          height: 200,
          url: "http://placeimg.com/200/200/arch"
        }, {
          width: 300,
          height: 200,
          url: "http://placeimg.com/300/200/arch"
        }],
        "tags": [{
          "id": 2,
          "name": "gulp"
        }, {
          "id": 3,
          "name": "webpack"
        }],
        "rating": 5
      }]
    }, {
      "name": "New Release",
      "courses": [{
        "id": 511022,
        "title": "Vue2 for Beginners",
        "covers": [{
          width: 150,
          height: 200,
          url: "http://placeimg.com/150/200/nature"
        }, {
          width: 200,
          height: 200,
          url: "http://placeimg.com/200/200/nature"
        }, {
          width: 300,
          height: 200,
          url: "http://placeimg.com/300/200/nature"
        }],
        "tags": [{
          id: 1,
          name: "JavaScript"
        }],
        "rating": 5
      }, {
        "id": 511023,
        "title": "Angular2 for Beginners",
        "covers": [{
          width: 150,
          height: 200,
          url: "http://placeimg.com/150/200/people"
        }, {
          width: 200,
          height: 200,
          url: "http://placeimg.com/200/200/people"
        }, {
          width: 300,
          height: 200,
          url: "http://placeimg.com/300/200/people"
        }],
        "tags": [{
          id: 1,
          name: "JavaScript"
        }],
        "rating": 5
      }]
    }];
    console.log(courseLists);

    var result = courseLists
    .map(list => list.courses
      .map(course => course.covers
        .filter(cover => cover.width === 200)
        .map(item => ({id: course.id, title: course.title, cover: item.url}))
      ).concatAll()
    ).concatAll();

    console.log(result);
















  </script>
</body>

</html>
