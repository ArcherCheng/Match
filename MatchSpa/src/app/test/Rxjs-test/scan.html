<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://unpkg.com/rxjs@5.4.2/bundles/Rx.min.js"></script>
</head>
<body>
  <button id="addButton">Add 1 </button>
  <button id="minusButton">minus 1</button>
  <h1 id="state"></h1>


  <script>
    // var arr = [1,2,3,4,5]
    // var result = arr.reduce((origin, next) => {
    //   console.log(origin, next);
    //   return origin + next;
    // },10)
    // console.log(result);

    // var source = Rx.Observable.from('hello')
    //     .zip(Rx.Observable.interval(500),(x,y) => x);
    // var example = source.scan((origin,next) => origin + next, 'hi,');

    // example.subscribe({
    //   next: (val) => {console.log(val);},
    //   error: (err) => {console.log('error: ' + err );},
    //   complete: () => {console.log('complete');}
    // });

    const addButton = document.getElementById('addButton');
    const minusButton = document.getElementById('minusButton');
    const state = document.getElementById('state');

    const addClick = Rx.Observable.fromEvent(addButton, 'click').mapTo(1);
    const minusClick = Rx.Observable.fromEvent(minusButton, 'click').mapTo(-1);

    const numberState = Rx.Observable
          .empty()
          .startWith(0)
          .merge(addClick, minusClick)
          .scan((origin,next) => origin + next , 100);

    numberState.subscribe({
      next: (val) => {state.innerHTML = val;},
      error: (err) => {console.log('error: ' + err );},
      complete: () => {console.log('complete');}
    });

  </script>

</body>
</html>
